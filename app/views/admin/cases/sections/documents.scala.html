@import domain.EntityAndCreator
@import domain.CaseLink
@import domain.CaseLinkType
@import domain.dao.CaseDao.Case
@import controllers.admin.CaseController
@import java.time.OffsetDateTime

@import domain.CaseDocument
@import controllers.admin.CaseDocumentController
@(
  c: Case,
  documents: Seq[EntityAndCreator[CaseDocument]]
)(implicit context: RequestContext, req: RequestHeader, messagesProvider: MessagesProvider)

@if(documents.nonEmpty) {
  <ul class="list-unstyled">
  @documents.map { doc =>
    <li>
      <a href="@controllers.admin.routes.CaseDocumentController.download(c.key.get, doc.entity.id)">@doc.entity.file.fileName</a>,
      @doc.entity.documentType.description,
      added @helpers.JavaTime.Relative(doc.entity.created, lowercaseToday = true) by @tags.creatorAndTeam(doc.creator)
      @defining(CaseDocumentController.deleteForm(doc.entity.lastUpdated).fill(doc.entity.lastUpdated)) { form: Form[OffsetDateTime] =>
        @b3.inline.formCSRF(controllers.admin.routes.CaseDocumentController.delete(c.key.get, doc.entity.id), 'class -> "inline-form") { implicit ifc =>
          @b3.validatedHidden(form, "version")
          <button type="submit" class="btn btn-sm btn-link" data-toggle="confirm-submit" data-message="Are you sure you want to delete this document?">
            <i class="fas fa-times-circle"></i>
          </button>
        }
      } <br/>
      @doc.entity.caseNote.text
    </li>
  }
  </ul>
} else {
  <p>This case has no documents</p>
}