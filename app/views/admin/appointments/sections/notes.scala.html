@import controllers.admin.AppointmentController.AppointmentNoteFormData
@import domain.{Appointment, AppointmentNote}

@(
  appointment: Appointment,
  notes: Seq[AppointmentNote],
  noteForm: Form[AppointmentNoteFormData],
)(implicit context: RequestContext, req: RequestHeader, messagesProvider: MessagesProvider)

@b3.vertical.formCSRF(controllers.admin.routes.AppointmentController.addNote(appointment.key)) { implicit ifc =>
  <div class="panel panel-default panel-form">
    <div class="panel-heading">
      <button type="submit" class="btn btn-primary">Save</button>
      <label class="control-label">Add an appointment note</label>
    </div>
    <div class="panel-body">
      @b3.validatedHidden(noteForm, "version")
      @b3.textarea(noteForm("text"), 'rows -> 5)
    </div>
  </div>
}

<div data-count="@notes.size">
  @notes.map(n => tags.appointments.appointmentNote(appointment, n))
</div>