@import domain.{Enquiry, MessageData, MessageSender, UploadedFile}
@import helpers.JavaTime

@(
  enquiry: Enquiry,
  message: MessageData,
  file: Option[UploadedFile],
  clientName: String,
  teamName: String,
  attachmentRoute: UploadedFile => Call
)

@if(message.sender == MessageSender.Client) {
  <div class="message message-client">
    <div class="date pull-right">@JavaTime.Relative(message.created, printToday = true)</div>
    <div class="message--author">@clientName</div>
    @views.utils.nl2br(message.text)
    @file.map { f =>
      <div class="message--attachment">
        <i class="fal fa-paperclip"></i>
        <a href="@attachmentRoute(f)">@f.fileName</a>
      </div>
    }
  </div>
} else {
  <div class="message message-team">
    <div class="date pull-right">@JavaTime.Relative(message.created, printToday = true)</div>
    <div class="message--author">@teamName</div>
    @views.utils.nl2br(message.text)
    @file.map { f =>
      <div class="message--attachment">
        <i class="fal fa-paperclip"></i>
        <a href="@attachmentRoute(f)">@f.fileName</a>
      </div>
    }
  </div>
}