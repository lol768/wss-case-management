@import services.Metric
@(
    teams: Seq[String],
    range: String,
    metrics: Seq[Metric],
    showTotal: Boolean
)(implicit context: RequestContext)

@row(metric: Metric) = {
    <tr>
      <th>
        @metric.name
      </th>
      
      @teams.map { case team =>
        <td>
          @metric.teamMetrics.find(_.team.name == team).map(_.value).getOrElse("-")
        </td>
      }
      
      @if(showTotal) {
        <th>
        @metric.teamMetrics.map({ case tm => tm.value }).sum
        </th>
      }
    </tr>
}
  
@main("Reports") {
  <table class="table table-default">
    <caption>@range</caption>
    <thead>
      <tr>
        <th></th>
        
        @teams.map { case team => <th>@team</th> }
        
        @if(showTotal) {
          <th>Total</th>
        }
      </tr>
    </thead>
    
    <tbody>
      @metrics.map { case metric => @row(metric) }
    </tbody>
  </table>
}
