@import (reference) "id7/less/bootstrap/variables.less";
@import (reference) "id7/less/bootstrap/mixins.less";
@import (reference) "id7/less/variables.less";
@import (reference) "id7/less/mixins.less";

@id7-image-root-dir: './lib/id7/images';
@icon-font-path: './lib/id7/fonts';
@fa-font-path: './lib/id7/fonts';

@import "id7/less/id7-no-fa";
@import "id7/less/font-awesome-pro";
@import "id7-theme";
@import "sysadmin-notices";
@import "error-pages";
@import "flexi-picker";

@fa-font-path: './lib/id7/fonts';
@brand-colour: #a14418;
@nav-link-padding: 10px 15px;

.pull-right:first-child {
  & + h1, & + h2, & + h3, & + h4, & + h5, & + h6 {
    margin-top: 0;
  }
}

.flex {
  display: flex;
}

@media (min-width: @grid-float-breakpoint) {
  @dl-horizontal-offset: 220px;
  .dl-horizontal.field-history dt {
    width: @dl-horizontal-offset;
  }
  .dl-horizontal.field-history dd {
    margin-left: @dl-horizontal-offset + @grid-gutter-width;
  }
}

.field-history {
  i.fa-history {
    margin-left: 5px;
    cursor: pointer;
  }
}

.popover button.close {
  padding: 0 2px;
}

.client-search {
  .dropdown-menu li {
    margin-bottom: 5px;
    a {
      padding: 5px 10px 5px 5px;
    }
  }
  .client-search-result {
    .media-left img {
      width: 60px;
      height: 60px;
    }
    .media-body {
      width: auto;
      .title {
        font-size: 120%;
      }
    }
  }
}

.hint {
  color: @gray-light;
  font-size: 90%;
}

.form-horizontal .control-label {
  font-weight: normal;
  color: @gray-light;
}

.spaced-buttons {
  margin-top: @grid-gutter-width;
  .btn + .btn {
    margin-left: @grid-gutter-width;
  }
}

.checkbox-condensed {
  .checkbox {
    margin: 0;
  }
}

dt {
  font-weight: normal;
}
dd {
  font-weight: bold;
}

table caption {
  font-weight: bold;
}

section.indent {
  margin-left: @grid-gutter-width;
}

.panel-form {
  .panel-body .form-group {
    margin-bottom: 0;
  }

  .panel-footer.spaced-buttons {
    margin-top: 0;
  }
}

.panel.enquiry {
  &.enquiry--client {
    background: #bfcac6 url(/assets/images/messages-bg.jpg) top right no-repeat;
    background-size: cover;
  }

  &.state-Closed {
    opacity: 0.7;
  }

  h4 {
    font-size: @font-size-h5;
    .fa-angle-down {
      display: none;
    }
    .collapsed {
      .fa-angle-down {
        display: inline-block;
      }
      .fa-angle-up {
        display: none;
      }
    }
    a {
      display: block;
      text-decoration: none;
      color: #333333;
      &:hover {
        color: #666666;
      }
    }
  }

  .message {
    .clearfix();
    border-radius: 10px;
    box-shadow: 5px 5px 10px 0 rgba(0,0,0,0.3);
    padding: @panel-heading-padding;
    margin-bottom: @panel-body-padding;
    word-break: break-word;
    .date {
      color: #5e5e5f;
    }
    .message--author {
      font-weight: bold;
    }
    .message--attachment {
      font-weight: bold;
      margin-top: (@line-height-computed / 2);
      padding-top: (@line-height-computed / 4);
      border-top: 1px solid @gray-light;
    }
    &.message-client {
      background-color: #E5F6CF;
      border: 1px solid #919191;
      margin-right: 20%;
    }
    &.message-team {
      background-color: #CFEFFB;
      border: 1px solid #c0c0c0;
      margin-left: 20%;
    }
    .message--read-indicator {
      font-size: @font-size-h5;
      color: #3E8C27;
    }
  }
  .panel-footer {
    background: rgba(191, 192, 191, 0.8);
    padding-bottom: @panel-body-padding;
    .form-group {
      display: block;
    }
    label {
      font-weight: normal;
    }

    textarea.form-control {
      width: 100%;
      border-radius: 10px;
    }

    .form-group {
      input[type="file"] {
        margin: 0 @grid-gutter-width;

        + button { margin-left: 0; }
      }

      button {
        margin-left: @grid-gutter-width;
        margin-right: @grid-gutter-width;
        padding: 0;
        width: 36px;
        height: 36px;

        border: 0;
        border-radius: 0;
        i {
          line-height: 36px;
        }
      }
    }
  }
}

.panel-group.enquiries .panel-body {
  max-height: ~"calc(100vh - 300px)";
  overflow-y: auto;
}

.form-inline.inline-form { // *twitch*
  display: inline-block;
}

// Default table styling CASE-108
.table-default {
  .table-striped;
  border-bottom: 1px solid @table-border-color;

  > caption {
    color: @brand-colour;
    font-size: @main-font-size;
    font-weight: bold;
    padding: 0;
  }
}

.tab-content > .active {
  padding-top: @grid-gutter-width;
}

.nav-tabs {
  > li.active {
    font-weight: bold;
  }

  html.flexbox & {
    display: flex;

    > li {
      flex: 1 1 0;

      > a i {
        margin-right: 5px;
      }
    }
  }
}

summary {
  cursor: pointer;
  &:focus { outline: none; }
  font-weight: bold;

  details[data-toggle="load"] & { color: @brand-colour; }
}

// Headings immediately after another heading should be closer together
h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
  + h1, + h2, + h3, + h4, + h5, + h6, + .h1, + .h2, + .h3, + .h4, + .h5, + .h6 {
    margin-top: 0;
  }
}

.enquiry-details--header {
  margin-bottom: @line-height-computed;
}

.enquiry-details--actions {
  margin: (@line-height-computed / 2) 0;
}

.enquiry-details .panel.enquiry .message {
  margin-bottom: (@panel-body-padding * 2);
}

.form-wellbeing {

  margin-left: @grid-gutter-width;

  .form-group {
    margin-bottom: 36px;
  }

  // help text next to the label (above fields) should sit directly underneath so nuke the margins
  label + .help-block {
    margin-top: -5px;
  }
}